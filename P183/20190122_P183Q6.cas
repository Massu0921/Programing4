P184Q6	START
	RPUSH
	LD	GR1,=10
	CALL	SUM
	CALL	DISP
	OUT	DATA,LEN	;出力
	RPOP
	RET
;
SUM	PUSH	0,GR2
	PUSH	0,GR3
	LD	GR2,=0
	LD	GR3,GR1
	LD	GR1,=0
SLOOP	ADDL	GR2,=1
	ADDL	GR1,GR2
	CPL	GR2,GR3
	JNZ	SLOOP
	POP	GR3
	POP	GR2
	RET
;
;入力値: GR1
DISP	RPUSH
	LD	GR4,=3
DLOOP	LD	GR2,GR1		;コピー
	AND	GR2,=#000F	;下位4bit
	LD	GR3,HEX,GR2	;変換
	ST	GR3,DATA,GR4	;格納
	SRL	GR1,4		;右シフト
	SUBL	GR4,=1
	CPA	GR4,=-1		;ループ判定
	JNZ	DLOOP
	RPOP
	RET
;
DATA	DS	4
LEN	DC	4
HEX	DC	'0123456789ABCDEF'
	END